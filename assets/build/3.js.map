{"version":3,"sources":["../../../ionicgame/src/pages/ship/ship.module.ts","../../../ionicgame/src/pages/ship/ship.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAwC;AACO;AACd;AACoC;AACgB;AAUrF;IAAA;IAA6B,CAAC;IAAjB,cAAc;QAR1B,uEAAQ,CAAC;YACR,YAAY,EAAE,CAAC,uDAAQ,CAAC;YACxB,OAAO,EAAE;gBACP,uGAAuB;gBACvB,uFAAgB;gBAChB,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;aACnC;SACF,CAAC;OACW,cAAc,CAAG;IAAD,qBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACde;AACgC;AACzB;AACI;AAChB;AACN;AAQ/B;IAOE,kBACS,OAAsB,EACtB,SAAoB,EACpB,IAAU,EACV,QAAkB,EAClB,WAAwB,EACvB,KAAsB;QANhC,iBAsBC;QArBQ,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,SAAI,GAAJ,IAAI,CAAM;QACV,aAAQ,GAAR,QAAQ,CAAU;QAClB,gBAAW,GAAX,WAAW,CAAa;QACvB,UAAK,GAAL,KAAK,CAAiB;QAZhC,iBAAiB;QACjB,OAAE,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC;QAG5B,SAAI,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;QAUvE,IAAI,OAAO,GAAG,kBAAkB,GAAG,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACtD,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,cAAI;YACzB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;YACjB,EAAE,CAAC,CAAC,OAAO,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC;YAC9B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;gBACjB,EAAE,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;oBACxB,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,cAAI;wBAC1C,MAAM,CAAC,IAAI,CAAC,EAAE,KAAK,KAAI,CAAC,EAAE,CAAC;oBAC7B,CAAC,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;QACH,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;IAC5B,CAAC;IAED,2BAAQ,GAAR,cAAa,CAAC;IAEd,iCAAc,GAAd,cAAmB,CAAC;IAEpB,6BAAU,GAAV;QACE,EAAE,CAAC,CACD,IAAI,CAAC,EAAE;YACP,IAAI,CAAC,IAAI,CAAC,UAAU;YACpB,IAAI,CAAC,IAAI,CAAC,QAAQ;YAClB,IAAI,CAAC,IAAI,CAAC,QACZ,CAAC,CAAC,CAAC;YACD,IAAI,CAAC,WAAW,CAAC,IAAI,CACnB,IAAI,CAAC,EAAE,EACP,IAAI,CAAC,IAAI,CAAC,UAAU,EACpB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAClB,IAAI,CAAC,IAAI,CAAC,QAAQ,CACnB,CAAC;QACJ,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,OAAO,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;QACjD,CAAC;IACH,CAAC;IAED,2BAAQ,GAAR;QACE,IAAI,GAAG,CAAC;QACR,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;YAC3B,GAAG,GAAG,6BAA6B,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa;QACnE,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACT,IAAI,CAAC;gBACH,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACrC,CAAC;YAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACX,GAAG,GAAG,CAAC;YACT,CAAC;QACH,CAAC;QACD,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACR,IAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACjC,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,GAAG;gBACZ,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,IAAI;wBACV,OAAO,EAAE;4BACP,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;wBAC7B,CAAC;qBACF;iBACF;aACF,CAAC,CAAC;YACH,QAAQ,CAAC,OAAO,EAAE,CAAC;QACrB,CAAC;IACH,CAAC;IAhFU,QAAQ;QAJpB,wEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;WACG;SACzB,CAAC;6EAS+B;YACX,4DAAS;YACd,kEAAI;YACA,sEAAQ;YACL,sEAAW;YAChB,KAAe;OAbrB,QAAQ,CAiFpB;IAAD,CAAC;AAAA;SAjFY,QAAQ,e","file":"3.js","sourcesContent":["import { NgModule } from \"@angular/core\"\nimport { IonicPageModule } from \"ionic-angular\"\nimport { ShipPage } from \"./ship\"\nimport { ComponentsModule } from \"../../components/components.module\"\nimport { ShipCardComponentModule } from \"../../components/ship-card/ship-card.module\"\n\n@NgModule({\n  declarations: [ShipPage],\n  imports: [\n    ShipCardComponentModule,\n    ComponentsModule,\n    IonicPageModule.forChild(ShipPage)\n  ]\n})\nexport class ShipPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ship/ship.module.ts","import { Component } from \"@angular/core\";\nimport { IonicPage, NavController, NavParams, AlertController } from \"ionic-angular\";\nimport { AppState } from \"../../app/app.service\";\nimport { Web3Service } from \"../../app/web3.service\";\nimport { Http } from \"@angular/http\";\nimport \"rxjs/add/operator/map\";\ndeclare var io: any;\n\n@IonicPage({\n  segment: \"ship/:id\"\n})\n@Component({\n  selector: \"page-ship\",\n  templateUrl: \"ship.html\"\n})\nexport class ShipPage {\n  // loading = true\n  id = this.navParams.data.id;\n  ship;\n  amOwner;\n  sell = { open: false, priceStart: null, priceEnd: null, duration: null };\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public http: Http,\n    public appState: AppState,\n    public web3Service: Web3Service,\n    private alert: AlertController\n  ) {\n    let address = \"/api/v1/ship?id=\" + encodeURI(this.id);\n    io.socket.get(address, data => {\n      console.log(data)\n      if (typeof data == \"string\") {\n      } else {\n        this.ship = data;\n        if (this.appState.ships) {\n          this.amOwner = this.appState.ships.some(item => {\n            return item.id === this.id;\n          });\n        }\n      }\n    });\n    console.log(this.appState)\n  }\n\n  ngOnInit() { }\n\n  ionViewDidLoad() { }\n\n  createSale() {\n    if (\n      this.id &&\n      this.sell.priceStart &&\n      this.sell.priceEnd &&\n      this.sell.duration\n    ) {\n      this.web3Service.sell(\n        this.id,\n        this.sell.priceStart,\n        this.sell.priceEnd,\n        this.sell.duration\n      );\n    } else {\n      console.log(\"createSale failed, missing data\");\n    }\n  }\n\n  purchase() {\n    let msg;\n    if (!this.appState.account) {\n      msg = 'No Ethereum account found. ' + this.appState.accountStatus\n    }\n    if (!msg) {\n      try {\n        this.web3Service.purchase(this.id);\n      } catch (e) {\n        msg = e\n      }\n    }\n    if (msg) {\n      const alerting = this.alert.create({\n        title: 'Error',\n        message: msg,\n        buttons: [\n          {\n            text: 'Ok',\n            handler: () => {\n              console.log('Buy clicked');\n            }\n          }\n        ]\n      });\n      alerting.present();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ship/ship.ts"],"sourceRoot":""}